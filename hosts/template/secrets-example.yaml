# Host-level secrets template (hosts/template/secrets-example.yaml)
# This file is automatically used by scripts/new-host.sh to create hosts/<hostname>/secrets.yaml
# These secrets are for system-wide configuration (services, system accounts, deployment keys)
#
# Generate secure secrets with:
#   openssl rand -hex 64  # For tokens, JWT secrets (128 chars)
#   openssl rand -hex 32  # For passwords, API keys (64 chars)
#   openssl rand -base64 32  # For base64-encoded secrets
#   age-keygen  # For age keys
#   ssh-keygen -t ed25519  # For SSH keys
#
# Encrypt with: SOPS_AGE_KEY_FILE=sops.key nix develop --command sops --config sops.yaml -e -i hosts/<hostname>/secrets.yaml

<hostname>:
  system:
    # SSH private key for deployment (generated automatically by new-host.sh)
    sshPrivateKey: |
      -----BEGIN OPENSSH PRIVATE KEY-----
      <WILL_BE_FILLED_BY_SCRIPT>
      -----END OPENSSH PRIVATE KEY-----
    
    # Root/system password (for emergency access, sudo)
    # password: "changeme"
  
  keys:
    # Age key for home-manager (extracted from host_key automatically by new-host.sh)
    age: |
      <WILL_BE_FILLED_BY_SCRIPT>
    
    # SSH host keys for services
    # initrd_ssh_key: |
    #   -----BEGIN OPENSSH PRIVATE KEY-----
    #   ...
    #   -----END OPENSSH PRIVATE KEY-----
  
  # System user accounts (for service accounts, admin users, etc.)
  # users:
  #   admin:
  #     password: "changeme"
  #   serviceuser:
  #     password: "changeme"
  
  # Service-specific secrets (databases, web services, infrastructure)
  # services:
  #   # Databases
  #   postgres:
  #     password: "changeme"
  #     connection_string: "postgresql://user:pass@host:5432/db"
  #   mysql:
  #     root_password: "changeme"
  #     user_password: "changeme"
  #   redis:
  #     password: "changeme"
  #   
  #   # Self-hosted services
  #   nextcloud:
  #     admin_password: "changeme"
  #     db_password: "changeme"
  #     onlyoffice_jwt_secret: "..."  # 64+ chars, generate with: openssl rand -hex 64
  #     sso_secret: "..."
  #   
  #   # Authentication (Authelia, LLDAP)
  #   authelia:
  #     jwt_secret: "..."  # Generate with: openssl rand -hex 64
  #     session_secret: "..."
  #     storage_encryption_key: "..."
  #     ldap_admin_password: "..."
  #     oidc_hmac_secret: "..."
  #     oidc_issuer_private_key: |
  #       -----BEGIN PRIVATE KEY-----
  #       ...
  #       -----END PRIVATE KEY-----
  #   lldap:
  #     user_password: "changeme"
  #     jwt_secret: "..."
  #   
  #   # Media services
  #   jellyfin:
  #     api_key: "..."
  #   immich:
  #     db_password: "changeme"
  #     api_key: "..."
  #   audiobookshelf:
  #     api_token: "..."
  #   
  #   # Monitoring
  #   grafana:
  #     admin_password: "changeme"
  #     secret_key: "..."
  #   prometheus:
  #     password: "changeme"
  #   
  #   # VPN/Networking
  #   wireguard:
  #     private_key: "..."
  #     preshared_key: "..."
  #   tailscale:
  #     auth_key: "tskey-..."
  #   
  #   # Reverse proxy/CDN
  #   cloudflare:
  #     tunnel_token: "..."
  #     api_token: "..."
  #   traefik:
  #     api_key: "..."
  #   
  #   # Backups
  #   restic:
  #     password: "..."
  #     repository_password: "..."
  #   borgbackup:
  #     passphrase: "..."
  #     repository: "..."
  
  # Infrastructure API keys (for system services, backups, monitoring)
  # api_keys:
  #   aws_access_key_id: "AKIA..."
  #   aws_secret_access_key: "..."
  #   do_token: "dop_v1_..."
  #   hetzner_api_token: "..."
  #   backblaze_key_id: "..."
  #   backblaze_application_key: "..."
  
  # SSL/TLS Certificates (for web servers, reverse proxies)
  # certificates:
  #   example_com:
  #     cert: |
  #       -----BEGIN CERTIFICATE-----
  #       ...
  #       -----END CERTIFICATE-----
  #     key: |
  #       -----BEGIN PRIVATE KEY-----
  #       ...
  #       -----END PRIVATE KEY-----
  #     chain: |
  #       -----BEGIN CERTIFICATE-----
  #       ...
  #       -----END CERTIFICATE-----
  
  # SMTP/Email configuration (for system notifications)
  # email:
  #   smtp_host: "smtp.example.com"
  #   smtp_port: "587"
  #   smtp_user: "notifications@example.com"
  #   smtp_password: "changeme"
  
  # Monitoring and alerting (for system monitoring services)
  # monitoring:
  #   prometheus_password: "changeme"
  #   grafana_api_key: "..."
  #   uptimekuma_api_key: "..."

